<!DOCTYPE html>
<html style="color-scheme: dark;">
<head>
    <meta charset="utf-8">
    <script type="text/javascript" src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
    <style type="text/css">
        body { background-color: #0b0e14; color: #e0e0e0; margin: 0; display: flex; font-family: sans-serif; height: 100vh; overflow: hidden; }
        #mynetwork { flex-grow: 1; height: 100vh; }
        #resizer { width: 6px; cursor: col-resize; background-color: #30363d; transition: background 0.2s; z-index: 10; }
        #resizer:hover { background-color: #58a6ff; }
        #config { width: 350px; min-width: 250px; height: 100vh; overflow-y: auto; background: #161b22; flex-shrink: 0; display: flex; flex-direction: column; }
        #config-controls { flex-grow: 1; }
        .vis-configuration-wrapper { color: #e0e0e0 !important; padding: 10px; }
        .vis-config-item { background: none !important; border: none !important; }
        .vis-config-label { color: #bbb !important; }
        .vis-config-header { color: #58a6ff !important; font-weight: bold; margin-top: 10px; border-bottom: 1px solid #333; }
        .vis-network .vis-navigation .vis-button { background-color: #21262d; border: 1px solid #444; border-radius: 4px; }
        #options-export { padding: 15px; background: #0d1117; border-top: 2px solid #30363d; flex-shrink: 0; }
        #options-export h3 { margin-top: 0; font-size: 14px; color: #58a6ff; }
        #options-code { background: #161b22; padding: 10px; border-radius: 4px; font-family: monospace; font-size: 11px; max-height: 200px; overflow: auto; white-space: pre-wrap; border: 1px solid #30363d; color: #8b949e; }
        #copy-btn { margin-top: 10px; width: 100%; padding: 8px; background: #238636; color: white; border: none; border-radius: 4px; cursor: pointer; font-weight: bold; }
        #copy-btn:hover { background: #2ea043; }
    </style>
</head>
<body>
<div id="mynetwork"></div>
<div id="resizer"></div>
<div id="config">
    <div id="config-controls"></div>
    <div id="options-export">
        <h3>Current Options (JSON)</h3>
        <div id="options-code">Modify a control to see JSON...</div>
        <button id="copy-btn">Copy Options</button>
    </div>
</div>
<script type="text/javascript">
    const nodes = new vis.DataSet([{"id":3312287155,"label":" InitialNode ","shape":"box","margin":10,"clusterGroup":null,"color":{"background":"#059669","border":"#047857","highlight":{"background":"#059669","border":"#ffffff"}},"borderWidth":1,"font":{"color":"#ffffff","size":14,"face":"sans-serif","strokeWidth":0}},{"id":1862179572,"label":" ProcessCLI ","shape":"box","margin":10,"clusterGroup":"Environment","color":{"background":"#1e293b","border":"#7c3aed","highlight":{"background":"#1e293b","border":"#ffffff"}},"borderWidth":3,"font":{"color":"#ffffff","size":14,"face":"sans-serif","strokeWidth":0}},{"id":420917339,"label":" LoadConfig ","shape":"box","margin":10,"clusterGroup":"Environment","color":{"background":"#1e293b","border":"#7c3aed","highlight":{"background":"#1e293b","border":"#ffffff"}},"borderWidth":3,"font":{"color":"#ffffff","size":14,"face":"sans-serif","strokeWidth":0}},{"id":1823095060,"label":" LoadTemplates ","shape":"box","margin":10,"clusterGroup":null,"color":{"background":"#1e293b","border":"#475569","highlight":{"background":"#1e293b","border":"#ffffff"}},"borderWidth":1,"font":{"color":"#ffffff","size":14,"face":"sans-serif","strokeWidth":0}},{"id":4069362651,"label":" ScanFS ","shape":"box","margin":10,"clusterGroup":"Ingestion","color":{"background":"#1e293b","border":"#d97706","highlight":{"background":"#1e293b","border":"#ffffff"}},"borderWidth":3,"font":{"color":"#ffffff","size":14,"face":"sans-serif","strokeWidth":0}},{"id":3260984437,"label":" ParseMarkdown ","shape":"box","margin":10,"clusterGroup":null,"color":{"background":"#1e293b","border":"#475569","highlight":{"background":"#1e293b","border":"#ffffff"}},"borderWidth":1,"font":{"color":"#ffffff","size":14,"face":"sans-serif","strokeWidth":0}},{"id":4155902627,"label":" RenderHTMLArticles ","shape":"box","margin":10,"clusterGroup":"Rendering","color":{"background":"#1e293b","border":"#db2777","highlight":{"background":"#1e293b","border":"#ffffff"}},"borderWidth":3,"font":{"color":"#ffffff","size":14,"face":"sans-serif","strokeWidth":0}},{"id":1861761156,"label":" RenderHTMLIndex ","shape":"box","margin":10,"clusterGroup":"Rendering","color":{"background":"#1e293b","border":"#db2777","highlight":{"background":"#1e293b","border":"#ffffff"}},"borderWidth":3,"font":{"color":"#ffffff","size":14,"face":"sans-serif","strokeWidth":0}},{"id":1664348767,"label":" WriteArticlesToDisk ","shape":"box","margin":10,"clusterGroup":"IO","color":{"background":"#1e293b","border":"#0284c7","highlight":{"background":"#1e293b","border":"#ffffff"}},"borderWidth":3,"font":{"color":"#ffffff","size":14,"face":"sans-serif","strokeWidth":0}},{"id":3805538920,"label":" WriteIndexToDisk ","shape":"box","margin":10,"clusterGroup":"IO","color":{"background":"#1e293b","border":"#0284c7","highlight":{"background":"#1e293b","border":"#ffffff"}},"borderWidth":3,"font":{"color":"#ffffff","size":14,"face":"sans-serif","strokeWidth":0}},{"id":2740539319,"label":" FinalNode ","shape":"box","margin":10,"clusterGroup":null,"color":{"background":"#059669","border":"#047857","highlight":{"background":"#059669","border":"#ffffff"}},"borderWidth":1,"font":{"color":"#ffffff","size":14,"face":"sans-serif","strokeWidth":0}},{"id":156735434,"label":" FatalErrors ","shape":"box","margin":10,"clusterGroup":null,"color":{"background":"#dc2626","border":"#b91c1c","highlight":{"background":"#dc2626","border":"#ffffff"}},"borderWidth":1,"font":{"color":"#ffffff","size":14,"face":"sans-serif","strokeWidth":0}}]);
    const edges = new vis.DataSet([{"id":"3312287155-1862179572-3056436994","from":3312287155,"to":1862179572,"label":"InitialCommand","color":"#94a3b8","width":1.5,"dashes":false,"arrows":"to","font":{"color":"#ffffff","size":11,"face":"monospace","strokeWidth":0}},{"id":"1862179572-420917339-2781954702","from":1862179572,"to":420917339,"label":"PathToConfig","color":"#94a3b8","width":1.5,"dashes":false,"arrows":"to","font":{"color":"#ffffff","size":11,"face":"monospace","strokeWidth":0}},{"id":"1862179572-1823095060-3239088686","from":1862179572,"to":1823095060,"label":"Settings","color":"#a855f7","width":1.5,"dashes":true,"arrows":"to","font":{"color":"#ffffff","size":11,"face":"monospace","strokeWidth":0}},{"id":"420917339-1823095060-3507956683","from":420917339,"to":1823095060,"label":"Settings","color":"#a855f7","width":1.5,"dashes":true,"arrows":"to","font":{"color":"#ffffff","size":11,"face":"monospace","strokeWidth":0}},{"id":"1862179572-4069362651-3239088686","from":1862179572,"to":4069362651,"label":"Settings","color":"#a855f7","width":1.5,"dashes":true,"arrows":"to","font":{"color":"#ffffff","size":11,"face":"monospace","strokeWidth":0}},{"id":"420917339-4069362651-3507956683","from":420917339,"to":4069362651,"label":"Settings","color":"#a855f7","width":1.5,"dashes":true,"arrows":"to","font":{"color":"#ffffff","size":11,"face":"monospace","strokeWidth":0}},{"id":"4069362651-3260984437-1889669997","from":4069362651,"to":3260984437,"label":"[SourceFile]","color":"#a855f7","width":5.0,"dashes":true,"arrows":"to","font":{"color":"#ffffff","size":11,"face":"monospace","strokeWidth":0}},{"id":"3260984437-4155902627-4092437058","from":3260984437,"to":4155902627,"label":"[Article]","color":"#a855f7","width":5.0,"dashes":true,"arrows":"to","font":{"color":"#ffffff","size":11,"face":"monospace","strokeWidth":0}},{"id":"1823095060-4155902627-1732961030","from":1823095060,"to":4155902627,"label":"Templates","color":"#a855f7","width":1.5,"dashes":true,"arrows":"to","font":{"color":"#ffffff","size":11,"face":"monospace","strokeWidth":0}},{"id":"1862179572-4155902627-3239088686","from":1862179572,"to":4155902627,"label":"Settings","color":"#a855f7","width":1.5,"dashes":true,"arrows":"to","font":{"color":"#ffffff","size":11,"face":"monospace","strokeWidth":0}},{"id":"420917339-4155902627-3507956683","from":420917339,"to":4155902627,"label":"Settings","color":"#a855f7","width":1.5,"dashes":true,"arrows":"to","font":{"color":"#ffffff","size":11,"face":"monospace","strokeWidth":0}},{"id":"3260984437-1861761156-4092437058","from":3260984437,"to":1861761156,"label":"[Article]","color":"#a855f7","width":5.0,"dashes":true,"arrows":"to","font":{"color":"#ffffff","size":11,"face":"monospace","strokeWidth":0}},{"id":"1862179572-1861761156-3239088686","from":1862179572,"to":1861761156,"label":"Settings","color":"#a855f7","width":1.5,"dashes":true,"arrows":"to","font":{"color":"#ffffff","size":11,"face":"monospace","strokeWidth":0}},{"id":"420917339-1861761156-3507956683","from":420917339,"to":1861761156,"label":"Settings","color":"#a855f7","width":1.5,"dashes":true,"arrows":"to","font":{"color":"#ffffff","size":11,"face":"monospace","strokeWidth":0}},{"id":"4155902627-1664348767-3250651259","from":4155902627,"to":1664348767,"label":"[HTMLarticle]","color":"#94a3b8","width":5.0,"dashes":false,"arrows":"to","font":{"color":"#ffffff","size":11,"face":"monospace","strokeWidth":0}},{"id":"1861761156-3805538920-140877122","from":1861761156,"to":3805538920,"label":"HTMLIndex","color":"#94a3b8","width":1.5,"dashes":false,"arrows":"to","font":{"color":"#ffffff","size":11,"face":"monospace","strokeWidth":0}},{"id":"1664348767-2740539319-2252411779","from":1664348767,"to":2740539319,"label":"[SuccessReport]","color":"#94a3b8","width":5.0,"dashes":false,"arrows":"to","font":{"color":"#ffffff","size":11,"face":"monospace","strokeWidth":0}},{"id":"3805538920-2740539319-219681608","from":3805538920,"to":2740539319,"label":"SuccessReport","color":"#94a3b8","width":1.5,"dashes":false,"arrows":"to","font":{"color":"#ffffff","size":11,"face":"monospace","strokeWidth":0}},{"id":"3805538920-156735434-1087097773","from":3805538920,"to":156735434,"label":"FileSystemError","color":"#ef4444","width":1.5,"dashes":false,"arrows":"to","font":{"color":"#ffffff","size":11,"face":"monospace","strokeWidth":0}},{"id":"1664348767-156735434-2594537754","from":1664348767,"to":156735434,"label":"[FileSystemError]","color":"#ef4444","width":5.0,"dashes":false,"arrows":"to","font":{"color":"#ffffff","size":11,"face":"monospace","strokeWidth":0}},{"id":"1823095060-2740539319-1732961030","from":1823095060,"to":2740539319,"label":"Templates","color":"#a855f7","width":1.5,"dashes":true,"arrows":"to","font":{"color":"#ffffff","size":11,"face":"monospace","strokeWidth":0}},{"id":"3260984437-156735434-2508726456","from":3260984437,"to":156735434,"label":"[FileSystemError]","color":"#ef4444","width":5.0,"dashes":false,"arrows":"to","font":{"color":"#ffffff","size":11,"face":"monospace","strokeWidth":0}},{"id":"4069362651-156735434-4126579574","from":4069362651,"to":156735434,"label":"[FileSystemError]","color":"#ef4444","width":5.0,"dashes":false,"arrows":"to","font":{"color":"#ffffff","size":11,"face":"monospace","strokeWidth":0}}]);
    const groups = ["Environment","Ingestion","IO","Rendering"];
    const groupColors = {"Ingestion":"#d97706","IO":"#0284c7","Environment":"#7c3aed","Rendering":"#db2777"};
    const container = document.getElementById('mynetwork');
    const configContainer = document.getElementById('config');
    const configControls = document.getElementById('config-controls');
    const optionsCode = document.getElementById('options-code');
    const copyBtn = document.getElementById('copy-btn');
    const resizer = document.getElementById('resizer');
    let isResizing = false;
    resizer.addEventListener('mousedown', () => isResizing = true);
    document.addEventListener('mousemove', (e) => {
        if (!isResizing) return;
        const newWidth = window.innerWidth - e.clientX;
        if (newWidth > 200 && newWidth < 900) configContainer.style.width = newWidth + 'px';
    });
    document.addEventListener('mouseup', () => isResizing = false);
    let lastScrollTop = 0;
    configContainer.addEventListener('scroll', () => { if (configContainer.scrollTop > 0) lastScrollTop = configContainer.scrollTop; }, {passive: true});
    new MutationObserver(() => { if (configContainer.scrollTop !== lastScrollTop) configContainer.scrollTop = lastScrollTop; })
        .observe(configControls, { childList: true, subtree: true });
    const data = { nodes, edges };
    const options = {
        physics: { enabled: true, solver: 'forceAtlas2Based', forceAtlas2Based: { gravitationalConstant: -100, springLength: 10, avoidOverlap: 1, damping: 0.75 } },
        interaction: { navigationButtons: true, keyboard: true, hover: true },
        configure: { enabled: true, container: configControls, showButton: false }
    };
    const network = new vis.Network(container, data, options);
    network.on("configChange", (params) => { optionsCode.innerText = JSON.stringify(params, null, 2); });
    const clusterBy = (g) => ({
        joinCondition: (n) => n.clusterGroup === g,
        clusterNodeProperties: { id: 'c:'+g, label: g, shape: 'box', margin: 10, color: { background: groupColors[g] || '#fbbf24', border: '#fff' }, font: { color: '#fff', size: 16, face: 'sans-serif', strokeWidth: 0 } }
    });
    groups.forEach(g => network.cluster(clusterBy(g)));
    network.on("click", (p) => {
        if (p.nodes.length > 0) {
            let id = p.nodes[0];
            if (network.isCluster(id)) network.openCluster(id);
            else { let d = nodes.get(id); if (d && d.clusterGroup) network.cluster(clusterBy(d.clusterGroup)); }
        }
    });
    copyBtn.addEventListener('click', () => {
        navigator.clipboard.writeText(optionsCode.innerText).then(() => {
            const originalText = copyBtn.innerText;
            copyBtn.innerText = "Copied!";
            setTimeout(() => { copyBtn.innerText = originalText; }, 1500);
        });
    });
</script>
</body>
</html>