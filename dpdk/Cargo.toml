[package]
name = "dpdk"
version = "0.1.0"
edition = "2021"
publish = false

[[bench]]
name = "micro"
harness = false

[features]
default = ["serde", "tracing_max_level_trace", "tracing_release_max_level_debug"]
serde = ["dep:serde"]

tracing_max_level_debug = ["tracing/max_level_debug"]
tracing_max_level_error = ["tracing/max_level_error"]
tracing_max_level_info = ["tracing/max_level_info"]
tracing_max_level_off = ["tracing/max_level_off"]
tracing_max_level_trace = ["tracing/max_level_trace"]
tracing_max_level_warn = ["tracing/max_level_warn"]

tracing_release_max_level_debug = ["tracing/release_max_level_debug"]
tracing_release_max_level_error = ["tracing/release_max_level_error"]
tracing_release_max_level_info = ["tracing/release_max_level_info"]
tracing_release_max_level_off = ["tracing/release_max_level_off"]
tracing_release_max_level_trace = ["tracing/release_max_level_trace"]
tracing_release_max_level_warn = ["tracing/release_max_level_warn"]

[dependencies]

# internal
dpdk-sys = { path = "../dpdk-sys" }
net = { path = "../net" }
errno = { path = "../errno" }

# external
allocator-api2 = { workspace = true }
blink-alloc = { workspace = true, features = ["alloc"] }
crossbeam = { version = "0.8.4", default-features = true, features = ["crossbeam-channel"] }
hashbrown = { version = "0.15.2", default-features = false, features = ["allocator-api2", "default-hasher"] }
left-right = { version = "0.11.5", default-features = false }
rand = "0.8.5"
serde = { workspace = true, optional = true }
smallvec = { version = "1.13.2", default-features = false, features = ["const_generics"] }
thiserror = { workspace = true }
tracing = { workspace = true, features = ["attributes"] }

[build-dependencies]
dpdk-sysroot-helper = { path = "../dpdk-sysroot-helper" }

[dev-dependencies]
criterion = { version = "0.5.1", default-features = true, features = ["html_reports"] }
